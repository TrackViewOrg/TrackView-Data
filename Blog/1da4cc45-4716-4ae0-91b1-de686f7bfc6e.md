# The Strategy Update

## RC1: The Neural Strategy Engine

We are finally here. **Release Candidate 1**.

For the past year, *ApexView* has been about analyzing what *happened*. With RC1, we are shifting our focus to what *will happen*. We are introducing the **"Oracle" Strategy Engine**, a predictive module that uses historical lap data and machine learning to calculate the optimal pit window and fuel load.

This isn't just a simple "liters per lap" calculator. The Oracle considers tire compound degradation curves, track temperature evolution, and traffic density.

The update is pushing to the `staging` branch immediately.

---

## üß† The "Oracle" Neural Net

We have integrated a lightweight TensorFlow Lite model directly into the client. It trains locally on your specific driving style. It doesn't upload your data to the cloud; it learns *your* tire wear habits.

### The Strategy Configuration

To facilitate this, we've created a new JSON-based strategy config that the engine reads at the start of a stint.

```json
{
  "sessionType": "RACE_TIMED",
  "sessionDurationMinutes": 60,
  "fuelTankCapacityLiters": 120,
  "pitStopDeltaSeconds": 28.5,
  "tireCompounds": [
    {
      "name": "Soft (C5)",
      "deg_coefficient": 0.08,
      "optimal_temp_range": [85, 105]
    },
    {
      "name": "Medium (C3)",
      "deg_coefficient": 0.04,
      "optimal_temp_range": [80, 100]
    }
  ]
}

```

**Note for Modders:** You can now create custom `car_strategy.json` files for modded content in Assetto Corsa. Place them in `Documents/ApexView/Configs/`.

---

## üìâ Feature Spotlight: Non-Linear Fuel Prediction

Most fuel calculators assume linear weight reduction. They assume you get faster by a fixed amount for every liter burned. The Oracle uses a non-linear regression model.

It calculates the **Lap Time Gain ()** based on the "Fuel Effect" variable, which changes depending on the circuit (e.g., fuel weight matters more at Spa than at Monaco).

The predictive formula for lap time at lap  is:

Where:

*  is your qualifying pace.
*  is the fuel weight penalty (seconds/kg).
*  is fuel remaining at lap .
*  is the tire degradation factor (exponential growth).
*  is the track evolution (rubbering in).

**What to test:** Start a race with a full tank. Drive until empty. Compare the Oracle's "Predicted Lap Time" trace (dashed grey line) with your actual lap times. The lines should converge as the AI learns your degradation rate.

---

## üìä UI/UX: The Strategist Dashboard

We have added a dedicated "Pit Wall" view intended for a second monitor or a tablet. We compared the refresh rate of the new dashboard against the old web-based overlay.

| Metric | v3.0 (Web Overlay) | RC1 (Native Pit Wall) | Improvement |
| --- | --- | --- | --- |
| **Fuel Calc Update Rate** | 1Hz (Every 1 sec) | 10Hz (Every 0.1 sec) | **10x Faster** |
| **Stint Prediction Accuracy** | +/- 2 laps | +/- 0.3 laps | **Precision Up** |
| **Battery Impact (Laptop)** | High (GPU rendering) | Low (CPU only) | **+40 mins battery** |
| **Traffic Tracking** | Not Available | 60 Cars Real-time | **New Feature** |

> "The Pit Wall view is designed to be high-contrast and readable from 3 feet away. Large fonts, clear deltas, no clutter. It tells you 'BOX NOW' or 'STAY OUT' without ambiguity." ‚Äî *Sarah Jenkins, Lead UI/UX Designer*

---

## üñ• Supported Platforms Status (RC1)

* **Assetto Corsa:** üü¢ **Stable**. Python app integration is seamless. Fuel prediction is accurate within 0.5 liters.
* **iRacing:** üü° **Partial Support**. The new rain update causes chaos with the prediction model. The AI struggles to predict lap times when the track state transitions from "Wet" to "Drying."
* **Automobilista 2:** üü¢ **Stable**. Great support for the timed races.
* **Gran Turismo 7 (UDP):** üî¥ **Unstable**. Sony's UDP output does not provide fuel capacity info, requiring manual user entry. We are working on a database workaround.

---

## üìã The Testing Protocol: The Rain Roulette

This is the hardest test for any strategy engine. We need to see how the Oracle handles variable conditions.

1. **Sim:** iRacing or ACC.
2. **Scenario:** Set weather to "Variable" with a high chance of rain mid-race.
3. **Action:** Drive normally. When the rain starts, watch the "Recommended Strategy" box.
4. **Goal:** The Oracle should detect the sudden lap time drop-off ( increase > 15%) and immediately recommend a pit stop for Wets/Inters. If it tells you to stay out on Slicks while you are doing 360s, the logic threshold is too high.

---

## üêõ Known Issues

1. **Pit Stop Delta:** In ACC, the pit lane time loss varies by track. We currently default to 30 seconds. You must manually calibrate this in the settings for now.
2. **Refueling Glitch:** Sometimes, when refueling, the "Fuel Remaining" graph will spike to 10,000 Liters for one frame. We are adding a low-pass filter to fix this.

We are one step away from v1.0 Gold. Thank you for your continued telemetry.

**Box, Box, Box.**
